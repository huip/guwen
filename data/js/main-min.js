/*!* Bootstrap.js by @fat & @mdo* Copyright 2012 Twitter, Inc.* http://www.apache.org/licenses/LICENSE-2.0.txt*/!function(a){a(function(){a.support.transition=function(){var b=function(){var d=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f;for(f in c){if(d.style[f]!==undefined){return c[f]}}}();return b&&{end:b}}()})}(window.jQuery),!function(a){var c='[data-dismiss="alert"]',b=function(e){a(e).on("click",c,this.close)};b.prototype.close=function(h){function j(){g.trigger("closed").remove()}var f=a(this),e=f.attr("data-target"),g;e||(e=f.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),g=a(e),h&&h.preventDefault(),g.length||(g=f.hasClass("alert")?f:f.parent()),g.trigger(h=a.Event("close"));if(h.isDefaultPrevented()){return}g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.on(a.support.transition.end,j):j()};var d=a.fn.alert;a.fn.alert=function(e){return this.each(function(){var f=a(this),g=f.data("alert");g||f.data("alert",g=new b(this)),typeof e=="string"&&g[e].call(f)})},a.fn.alert.Constructor=b,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",c,b.prototype.close)}(window.jQuery),!function(c){var b=function(d,e){this.$element=c(d),this.options=c.extend({},c.fn.button.defaults,e)};b.prototype.setState=function(d){var g="disabled",e=this.$element,h=e.data(),f=e.is("input")?"val":"html";d+="Text",h.resetText||e.data("resetText",e[f]()),e[f](h[d]||this.options[d]),setTimeout(function(){d=="loadingText"?e.addClass(g).attr(g,g):e.removeClass(g).removeAttr(g)},0)},b.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active"),this.$element.toggleClass("active")};var a=c.fn.button;c.fn.button=function(d){return this.each(function(){var e=c(this),f=e.data("button"),g=typeof d=="object"&&d;f||e.data("button",f=new b(this,g)),d=="toggle"?f.toggle():d&&f.setState(d)})},c.fn.button.defaults={loadingText:"loading..."},c.fn.button.Constructor=b,c.fn.button.noConflict=function(){return c.fn.button=a,this},c(document).on("click.button.data-api","[data-toggle^=button]",function(d){var e=c(d.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(window.jQuery),!function(c){var b=function(d,e){this.$element=c(d),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.options.pause=="hover"&&this.$element.on("mouseenter",c.proxy(this.pause,this)).on("mouseleave",c.proxy(this.cycle,this))};b.prototype={cycle:function(d){return d||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(f){var e=this.getActiveIndex(),d=this;if(f>this.$items.length-1||f<0){return}return this.sliding?this.$element.one("slid",function(){d.to(f)}):e==f?this.pause().cycle():this.slide(f>e?"next":"prev",c(this.$items[f]))},pause:function(d){return d||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition.end&&(this.$element.trigger(c.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(k,e){var m=this.$element.find(".item.active"),f=e||m[k](),l=this.interval,d=k=="next"?"left":"right",j=k=="next"?"first":"last",h=this,g;this.sliding=!0,l&&this.pause(),f=f.length?f:this.$element.find(".item")[j](),g=c.Event("slide",{relatedTarget:f[0],direction:d});if(f.hasClass("active")){return}this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var i=c(h.$indicators.children()[h.getActiveIndex()]);i&&i.addClass("active")}));if(c.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(g);if(g.isDefaultPrevented()){return}f.addClass(k),f[0].offsetWidth,m.addClass(d),f.addClass(d),this.$element.one(c.support.transition.end,function(){f.removeClass([k,d].join(" ")).addClass("active"),m.removeClass(["active",d].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger("slid")},0)})}else{this.$element.trigger(g);if(g.isDefaultPrevented()){return}m.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return l&&this.cycle(),this}};var a=c.fn.carousel;c.fn.carousel=function(d){return this.each(function(){var h=c(this),f=h.data("carousel"),g=c.extend({},c.fn.carousel.defaults,typeof d=="object"&&d),e=typeof d=="string"?d:g.slide;f||h.data("carousel",f=new b(this,g)),typeof d=="number"?f.to(d):e?f[e]():g.interval&&f.pause().cycle()})},c.fn.carousel.defaults={interval:5000,pause:"hover"},c.fn.carousel.Constructor=b,c.fn.carousel.noConflict=function(){return c.fn.carousel=a,this},c(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(g){var f=c(this),j,e=c(f.attr("data-target")||(j=f.attr("href"))&&j.replace(/.*(?=#[^\s]+$)/,"")),h=c.extend({},e.data(),f.data()),d;e.carousel(h),(d=f.attr("data-slide-to"))&&e.data("carousel").pause().to(d).cycle(),g.preventDefault()})}(window.jQuery),!function(c){var b=function(d,e){this.$element=c(d),this.options=c.extend({},c.fn.collapse.defaults,e),this.options.parent&&(this.$parent=c(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var g,e,d,f;if(this.transitioning||this.$element.hasClass("in")){return}g=this.dimension(),e=c.camelCase(["scroll",g].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){f=d.data("collapse");if(f&&f.transitioning){return}d.collapse("hide"),f||d.data("collapse",null)}this.$element[g](0),this.transition("addClass",c.Event("show"),"shown"),c.support.transition&&this.$element[g](this.$element[0][e])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension(),this.reset(this.$element[d]()),this.transition("removeClass",c.Event("hide"),"hidden"),this.$element[d](0)},reset:function(e){var d=this.dimension();return this.$element.removeClass("collapse")[d](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(g,e,d){var f=this,h=function(){e.type=="show"&&f.reset(),f.transitioning=0,f.$element.trigger(d)};this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.transitioning=1,this.$element[g]("in"),c.support.transition&&this.$element.hasClass("collapse")?this.$element.one(c.support.transition.end,h):h()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var a=c.fn.collapse;c.fn.collapse=function(d){return this.each(function(){var e=c(this),f=e.data("collapse"),g=c.extend({},c.fn.collapse.defaults,e.data(),typeof d=="object"&&d);f||e.data("collapse",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.collapse.defaults={toggle:!0},c.fn.collapse.Constructor=b,c.fn.collapse.noConflict=function(){return c.fn.collapse=a,this},c(document).on("click.collapse.data-api","[data-toggle=collapse]",function(g){var e=c(this),d,f=e.attr("data-target")||g.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),h=c(f).data("collapse")?"toggle":e.data();e[c(f).hasClass("in")?"addClass":"removeClass"]("collapsed"),c(f).collapse(h)})}(window.jQuery),!function(c){function b(){c(f).each(function(){g(c(this)).removeClass("open")})}function g(i){var h=i.attr("data-target"),e;h||(h=i.attr("href"),h=h&&/#/.test(h)&&h.replace(/.*(?=#[^\s]*$)/,"")),e=h&&c(h);if(!e||!e.length){e=i.parent()}return e}var f="[data-toggle=dropdown]",d=function(e){var h=c(e).on("click.dropdown.data-api",this.toggle);c("html").on("click.dropdown.data-api",function(){h.parent().removeClass("open")})};d.prototype={constructor:d,toggle:function(i){var h=c(this),j,e;if(h.is(".disabled, :disabled")){return}return j=g(h),e=j.hasClass("open"),b(),e||j.toggleClass("open"),h.focus(),!1},keydown:function(h){var k,j,e,i,m,l;if(!/(38|40|27)/.test(h.keyCode)){return}k=c(this),h.preventDefault(),h.stopPropagation();if(k.is(".disabled, :disabled")){return}i=g(k),m=i.hasClass("open");if(!m||m&&h.keyCode==27){return h.which==27&&i.find(f).focus(),k.click()}j=c("[role=menu] li:not(.divider):visible a",i);if(!j.length){return}l=j.index(j.filter(":focus")),h.keyCode==38&&l>0&&l--,h.keyCode==40&&l<j.length-1&&l++,~l||(l=0),j.eq(l).focus()}};var a=c.fn.dropdown;c.fn.dropdown=function(e){return this.each(function(){var h=c(this),i=h.data("dropdown");i||h.data("dropdown",i=new d(this)),typeof e=="string"&&i[e].call(h)})},c.fn.dropdown.Constructor=d,c.fn.dropdown.noConflict=function(){return c.fn.dropdown=a,this},c(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",f,d.prototype.toggle).on("keydown.dropdown.data-api",f+", [role=menu]",d.prototype.keydown)}(window.jQuery),!function(c){var b=function(d,e){this.options=e,this.$element=c(d).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var d=this,e=c.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented()){return}this.isShown=!0,this.escape(),this.backdrop(function(){var f=c.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(document.body),d.$element.show(),f&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus(),f?d.$element.one(c.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(d){d&&d.preventDefault();var e=this;d=c.Event("hide"),this.$element.trigger(d);if(!this.isShown||d.isDefaultPrevented()){return}this.isShown=!1,this.escape(),c(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;c(document).on("focusin.modal",function(e){d.$element[0]!==e.target&&!d.$element.has(e.target).length&&d.$element.focus()})},escape:function(){var d=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&d.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(c.support.transition.end),d.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(e),d.hideModal()})},hideModal:function(){var d=this;this.$element.hide(),this.backdrop(function(){d.removeBackdrop(),d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(g){var e=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=c.support.transition&&d;this.$backdrop=c('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!g){return}f?this.$backdrop.one(c.support.transition.end,g):g()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g):g()):g&&g()}}};var a=c.fn.modal;c.fn.modal=function(d){return this.each(function(){var e=c(this),f=e.data("modal"),g=c.extend({},c.fn.modal.defaults,e.data(),typeof d=="object"&&d);f||e.data("modal",f=new b(this,g)),typeof d=="string"?f[d]():g.show&&f.show()})},c.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},c.fn.modal.Constructor=b,c.fn.modal.noConflict=function(){return c.fn.modal=a,this},c(document).on("click.modal.data-api",'[data-toggle="modal"]',function(g){var e=c(this),d=e.attr("href"),f=c(e.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),h=f.data("modal")?"toggle":c.extend({remote:!/#/.test(d)&&d},f.data(),e.data());g.preventDefault(),f.modal(h).one("hide",function(){e.focus()})})}(window.jQuery),!function(c){var b=function(e,d){this.init("tooltip",e,d)};b.prototype={constructor:b,init:function(e,f,l){var k,g,d,j,h;this.type=e,this.$element=c(f),this.options=this.getOptions(l),this.enabled=!0,d=this.options.trigger.split(" ");for(h=d.length;h--;){j=d[h],j=="click"?this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this)):j!="manual"&&(k=j=="hover"?"mouseenter":"focus",g=j=="hover"?"mouseleave":"blur",this.$element.on(k+"."+this.type,this.options.selector,c.proxy(this.enter,this)),this.$element.on(g+"."+this.type,this.options.selector,c.proxy(this.leave,this)))}this.options.selector?this._options=c.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(d){return d=c.extend({},c.fn[this.type].defaults,this.$element.data(),d),d.delay&&typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),d},enter:function(d){var e=c(d.currentTarget)[this.type](this._options).data(this.type);if(!e.options.delay||!e.options.delay.show){return e.show()}clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){e.hoverState=="in"&&e.show()},e.options.delay.show)},leave:function(d){var e=c(d.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!e.options.delay||!e.options.delay.hide){return e.hide()}e.hoverState="out",this.timeout=setTimeout(function(){e.hoverState=="out"&&e.hide()},e.options.delay.hide)},show:function(){var g,f,k,e,h,d,j=c.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(j);if(j.isDefaultPrevented()){return}g=this.tip(),this.setContent(),this.options.animation&&g.addClass("fade"),h=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement,g.detach().css({top:0,left:0,display:"block"}),this.options.container?g.appendTo(this.options.container):g.insertAfter(this.$element),f=this.getPosition(),k=g[0].offsetWidth,e=g[0].offsetHeight;switch(h){case"bottom":d={top:f.top+f.height,left:f.left+f.width/2-k/2};break;case"top":d={top:f.top-e,left:f.left+f.width/2-k/2};break;case"left":d={top:f.top+f.height/2-e/2,left:f.left-k};break;case"right":d={top:f.top+f.height/2-e/2,left:f.left+f.width}}this.applyPlacement(d,h),this.$element.trigger("shown")}},applyPlacement:function(g,k){var e=this.tip(),m=e[0].offsetWidth,f=e[0].offsetHeight,l,d,j,h;e.offset(g).addClass(k).addClass("in"),l=e[0].offsetWidth,d=e[0].offsetHeight,k=="top"&&d!=f&&(g.top=g.top+f-d,h=!0),k=="bottom"||k=="top"?(j=0,g.left<0&&(j=g.left*-2,g.left=0,e.offset(g),l=e[0].offsetWidth,d=e[0].offsetHeight),this.replaceArrow(j-m+l,l,"left")):this.replaceArrow(d-f,d,"top"),h&&e.offset(g)},replaceArrow:function(d,f,e){this.arrow().css(e,d?50*(1-d/f)+"%":"")},setContent:function(){var e=this.tip(),d=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](d),e.removeClass("fade in top bottom left right")},hide:function(){function g(){var h=setTimeout(function(){e.off(c.support.transition.end).detach()},500);e.one(c.support.transition.end,function(){clearTimeout(h),e.detach()})}var f=this,e=this.tip(),d=c.Event("hide");this.$element.trigger(d);if(d.isDefaultPrevented()){return}return e.removeClass("in"),c.support.transition&&this.$tip.hasClass("fade")?g():e.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var d=this.$element;(d.attr("title")||typeof d.attr("data-original-title")!="string")&&d.attr("data-original-title",d.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return c.extend({},typeof d.getBoundingClientRect=="function"?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var d,f=this.$element,e=this.options;return d=f.attr("data-original-title")||(typeof e.title=="function"?e.title.call(f[0]):e.title),d},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(d){var e=d?c(d.currentTarget)[this.type](this._options).data(this.type):this;e.tip().hasClass("in")?e.hide():e.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=c.fn.tooltip;c.fn.tooltip=function(d){return this.each(function(){var e=c(this),f=e.data("tooltip"),g=typeof d=="object"&&d;f||e.data("tooltip",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.tooltip.Constructor=b,c.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},c.fn.tooltip.noConflict=function(){return c.fn.tooltip=a,this}}(window.jQuery),!function(c){var b=function(e,d){this.init("popover",e,d)};b.prototype=c.extend({},c.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var d=this.tip(),f=this.getTitle(),e=this.getContent();d.find(".popover-title")[this.options.html?"html":"text"](f),d.find(".popover-content")[this.options.html?"html":"text"](e),d.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var d,f=this.$element,e=this.options;return d=(typeof e.content=="function"?e.content.call(f[0]):e.content)||f.attr("data-content"),d},tip:function(){return this.$tip||(this.$tip=c(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var a=c.fn.popover;c.fn.popover=function(d){return this.each(function(){var e=c(this),f=e.data("popover"),g=typeof d=="object"&&d;f||e.data("popover",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.popover.Constructor=b,c.fn.popover.defaults=c.extend({},c.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.fn.popover.noConflict=function(){return c.fn.popover=a,this}}(window.jQuery),!function(c){function b(g,e){var d=c.proxy(this.process,this),f=c(g).is("body")?c(window):c(g),h;this.options=c.extend({},c.fn.scrollspy.defaults,e),this.$scrollElement=f.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(h=c(g).attr("href"))&&h.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=c("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var d=this,e;this.offsets=c([]),this.targets=c([]),e=this.$body.find(this.selector).map(function(){var h=c(this),g=h.data("target")||h.attr("href"),f=/^#\w/.test(g)&&c(g);return f&&f.length&&[[f.position().top+(!c.isWindow(d.$scrollElement.get(0))&&d.$scrollElement.scrollTop()),g]]||null}).sort(function(g,f){return g[0]-f[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},process:function(){var k=this.$scrollElement.scrollTop()+this.options.offset,j=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,f=j-this.$scrollElement.height(),g=this.offsets,h=this.targets,e=this.activeTarget,d;if(k>=f){return e!=(d=h.last()[0])&&this.activate(d)}for(d=g.length;d--;){e!=h[d]&&k>=g[d]&&(!g[d+1]||k<=g[d+1])&&this.activate(h[d])}},activate:function(f){var e,d;this.activeTarget=f,c(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+f+'"],'+this.selector+'[href="'+f+'"]',e=c(d).parent("li").addClass("active"),e.parent(".dropdown-menu").length&&(e=e.closest("li.dropdown").addClass("active")),e.trigger("activate")}};var a=c.fn.scrollspy;c.fn.scrollspy=function(d){return this.each(function(){var e=c(this),f=e.data("scrollspy"),g=typeof d=="object"&&d;f||e.data("scrollspy",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.scrollspy.Constructor=b,c.fn.scrollspy.defaults={offset:10},c.fn.scrollspy.noConflict=function(){return c.fn.scrollspy=a,this},c(window).on("load",function(){c('[data-spy="scroll"]').each(function(){var d=c(this);d.scrollspy(d.data())})})}(window.jQuery),!function(c){var b=function(d){this.element=c(d)};b.prototype={constructor:b,show:function(){var g=this.element,f=g.closest("ul:not(.dropdown-menu)"),j=g.attr("data-target"),e,h,d;j||(j=g.attr("href"),j=j&&j.replace(/.*(?=#[^\s]*$)/,""));if(g.parent("li").hasClass("active")){return}e=f.find(".active:last a")[0],d=c.Event("show",{relatedTarget:e}),g.trigger(d);if(d.isDefaultPrevented()){return}h=c(j),this.activate(g.parent("li"),f),this.activate(h,h.parent(),function(){g.trigger({type:"shown",relatedTarget:e})})},activate:function(g,f,j){function d(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),g.addClass("active"),h?(g[0].offsetWidth,g.addClass("in")):g.removeClass("fade"),g.parent(".dropdown-menu")&&g.closest("li.dropdown").addClass("active"),j&&j()}var e=f.find("> .active"),h=j&&c.support.transition&&e.hasClass("fade");h?e.one(c.support.transition.end,d):d(),e.removeClass("in")}};var a=c.fn.tab;c.fn.tab=function(d){return this.each(function(){var e=c(this),f=e.data("tab");f||e.data("tab",f=new b(this)),typeof d=="string"&&f[d]()})},c.fn.tab.Constructor=b,c.fn.tab.noConflict=function(){return c.fn.tab=a,this},c(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(d){d.preventDefault(),c(this).tab("show")})}(window.jQuery),!function(c){var b=function(d,e){this.$element=c(d),this.options=c.extend({},c.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=c(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var d=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(d)).change(),this.hide()},updater:function(d){return d},show:function(){var d=c.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:d.top+d.height,left:d.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(d){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=c.isFunction(this.source)?this.source(this.query,c.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(d){var e=this;return d=c.grep(d,function(f){return e.matcher(f)}),d=this.sorter(d),d.length?this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(d){var g=[],e=[],h=[],f;while(f=d.shift()){f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?e.push(f):h.push(f):g.push(f)}return g.concat(e,h)},highlighter:function(e){var d=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+d+")","ig"),function(g,f){return"<strong>"+f+"</strong>"})},render:function(d){var e=this;return d=c(d).map(function(f,g){return f=c(e.options.item).attr("data-value",g),f.find("a").html(e.highlighter(g)),f[0]}),d.first().addClass("active"),this.$menu.html(d),this},next:function(f){var e=this.$menu.find(".active").removeClass("active"),d=e.next();d.length||(d=c(this.$menu.find("li")[0])),d.addClass("active")},prev:function(d){var f=this.$menu.find(".active").removeClass("active"),e=f.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",c.proxy(this.focus,this)).on("blur",c.proxy(this.blur,this)).on("keypress",c.proxy(this.keypress,this)).on("keyup",c.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",c.proxy(this.keydown,this)),this.$menu.on("click",c.proxy(this.click,this)).on("mouseenter","li",c.proxy(this.mouseenter,this)).on("mouseleave","li",c.proxy(this.mouseleave,this))},eventSupported:function(e){var d=e in this.$element;return d||(this.$element.setAttribute(e,"return;"),d=typeof this.$element[e]=="function"),d},move:function(d){if(!this.shown){return}switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault(),this.prev();break;case 40:d.preventDefault(),this.next()}d.stopPropagation()},keydown:function(d){this.suppressKeyPressRepeat=~c.inArray(d.keyCode,[40,38,9,13,27]),this.move(d)},keypress:function(d){if(this.suppressKeyPressRepeat){return}this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(d){this.focused=!0},blur:function(d){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),c(d.currentTarget).addClass("active")},mouseleave:function(d){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var a=c.fn.typeahead;c.fn.typeahead=function(d){return this.each(function(){var e=c(this),f=e.data("typeahead"),g=typeof d=="object"&&d;f||e.data("typeahead",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},c.fn.typeahead.Constructor=b,c.fn.typeahead.noConflict=function(){return c.fn.typeahead=a,this},c(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(d){var e=c(this);if(e.data("typeahead")){return}e.typeahead(e.data())})}(window.jQuery),!function(c){var b=function(d,e){this.options=c.extend({},c.fn.affix.defaults,e),this.$window=c(window).on("scroll.affix.data-api",c.proxy(this.checkPosition,this)).on("click.affix.data-api",c.proxy(function(){setTimeout(c.proxy(this.checkPosition,this),1)},this)),this.$element=c(d),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var e=c(document).height(),f=this.$window.scrollTop(),l=this.$element.offset(),k=this.options.offset,g=k.bottom,d=k.top,j="affix affix-top affix-bottom",h;typeof k!="object"&&(g=d=k),typeof d=="function"&&(d=k.top()),typeof g=="function"&&(g=k.bottom()),h=this.unpin!=null&&f+this.unpin<=l.top?!1:g!=null&&l.top+this.$element.height()>=e-g?"bottom":d!=null&&f<=d?"top":!1;if(this.affixed===h){return}this.affixed=h,this.unpin=h=="bottom"?l.top-f:null,this.$element.removeClass(j).addClass("affix"+(h?"-"+h:""))};var a=c.fn.affix;c.fn.affix=function(d){return this.each(function(){var e=c(this),f=e.data("affix"),g=typeof d=="object"&&d;f||e.data("affix",f=new b(this,g)),typeof d=="string"&&f[d]()})},c.fn.affix.Constructor=b,c.fn.affix.defaults={offset:0},c.fn.affix.noConflict=function(){return c.fn.affix=a,this},c(window).on("load",function(){c('[data-spy="affix"]').each(function(){var d=c(this),e=d.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),d.affix(e)})})}(window.jQuery);jQuery.cookie=function(h,c,f){if(typeof c!="undefined"){f=f||{};if(c===null){c="";f=$.extend({},f);f.expires=-1}var l="";if(f.expires&&(typeof f.expires=="number"||f.expires.toUTCString)){var m;if(typeof f.expires=="number"){m=new Date();m.setTime(m.getTime()+(f.expires*24*60*60*1000))}else{m=f.expires}l="; expires="+m.toUTCString()}var e=f.path?"; path="+(f.path):"";var a=f.domain?"; domain="+(f.domain):"";var g=f.secure?"; secure":"";document.cookie=[h,"=",encodeURIComponent(c),l,e,a,g].join("")}else{var k=null;if(document.cookie&&document.cookie!=""){var d=document.cookie.split(";");for(var b=0;b<d.length;b++){var j=jQuery.trim(d[b]);if(j.substring(0,h.length+1)==(h+"=")){k=decodeURIComponent(j.substring(h.length+1));break}}}return k}};(function(b){b.Jcrop=function(a1,aP){function a8(c){return Math.round(c)+"px"}function a4(c){return a5.baseClass+"-"+c}function a0(){return b.fx.step.hasOwnProperty("backgroundColor")}function aW(c){var d=b(c).offset();return[d.left,d.top]}function aU(c){return[c.pageX-aX[0],c.pageY-aX[1]]}function aQ(c){typeof c!="object"&&(c={}),a5=b.extend(a5,c),b.each(["onChange","onSelect","onRelease","onDblClick"],function(e,d){typeof a5[d]!="function"&&(a5[d]=function(){})})}function aM(c,f,h){aX=aW(bz),a7.setCursor(c==="move"?c:c+"-resize");if(c==="move"){return a7.activateHandlers(aE(f),aw,h)}var g=be.getFixed(),e=aB(c),d=be.getCorner(aB(e));be.setPressed(be.getCorner(e)),be.setCurrent(d),a7.activateHandlers(aI(c,g),aw,h)}function aI(d,c){return function(e){if(!a5.aspectRatio){switch(d){case"e":e[1]=c.y2;break;case"w":e[1]=c.y2;break;case"n":e[0]=c.x2;break;case"s":e[0]=c.x2}}else{switch(d){case"e":e[1]=c.y+1;break;case"w":e[1]=c.y+1;break;case"n":e[0]=c.x+1;break;case"s":e[0]=c.x+1}}be.setCurrent(e),a9.update()}}function aE(d){var c=d;return aZ.watchKeys(),function(e){be.moveOffset([e[0]-c[0],e[1]-c[1]]),c=e,a9.update()}}function aB(c){switch(c){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function az(c){return function(d){return a5.disabled?!1:c==="move"&&!a5.allowMove?!1:(aX=aW(bz),bg=!0,aM(c,aU(d)),d.stopPropagation(),d.preventDefault(),!1)}}function ay(d,c,g){var f=d.width(),e=d.height();f>c&&c>0&&(f=c,e=c/d.width()*d.height()),e>g&&g>0&&(e=g,f=g/d.height()*d.width()),bj=d.width()/f,bi=d.height()/e,d.width(f).height(e)}function ax(c){return{x:c.x*bj,y:c.y*bi,x2:c.x2*bj,y2:c.y2*bi,w:c.w*bj,h:c.h*bi}}function aw(d){var c=be.getFixed();c.w>a5.minSelect[0]&&c.h>a5.minSelect[1]?(a9.enableHandles(),a9.done()):a9.release(),a7.setCursor(a5.allowSelect?"crosshair":"default")}function av(d){if(a5.disabled){return !1}if(!a5.allowSelect){return !1}bg=!0,aX=aW(bz),a9.disableHandles(),a7.setCursor("crosshair");var c=aU(d);return be.setPressed(c),a9.update(),a7.activateHandlers(a,aw,d.type.substring(0,5)==="touch"),aZ.watchKeys(),d.stopPropagation(),d.preventDefault(),!1}function a(c){be.setCurrent(c),a9.update()}function bd(){var c=b("<div></div>").addClass(a4("tracker"));return aJ&&c.css({opacity:0,backgroundColor:"white"}),c}function aT(c){bw.removeClass().addClass(a4("holder")).addClass(c)}function aL(p,n){function m(){window.setTimeout(c,g)}var l=p[0]/bj,i=p[1]/bi,v=p[2]/bj,s=p[3]/bi;if(bf){return}var q=be.flipCoords(l,i,v,s),o=be.getFixed(),k=[o.x,o.y,o.x2,o.y2],j=k,g=a5.animationDelay,f=q[0]-k[0],e=q[1]-k[1],d=q[2]-k[2],h=q[3]-k[3],u=0,t=a5.swingSpeed;l=j[0],i=j[1],v=j[2],s=j[3],a9.animMode(!0);var r,c=function(){return function(){u+=(100-u)/t,j[0]=Math.round(l+u/100*f),j[1]=Math.round(i+u/100*e),j[2]=Math.round(v+u/100*d),j[3]=Math.round(s+u/100*h),u>=99.8&&(u=100),u<100?(aV(j),m()):(a9.done(),a9.animMode(!1),typeof n=="function"&&n.call(aC))}}();m()}function a3(c){aV([c[0]/bj,c[1]/bi,c[2]/bj,c[3]/bi]),a5.onSelect.call(aC,ax(be.getFixed())),a9.enableHandles()}function aV(c){be.setPressed([c[0],c[1]]),be.setCurrent([c[2],c[3]]),a9.update()}function aN(){return ax(be.getFixed())}function aH(){return be.getFixed()}function aD(c){aQ(c),aG()}function a6(){a5.disabled=!0,a9.disableHandles(),a9.setCursor("default"),a7.setCursor("default")}function a2(){a5.disabled=!1,aG()}function aY(){a9.done(),a7.activateHandlers(null,null)}function aS(){bw.remove(),bC.show(),bC.css("visibility","visible"),b(a1).removeData("Jcrop")}function aO(d,c){a9.release(),a6();var e=new Image;e.onload=function(){var h=e.width,f=e.height,i=a5.boxWidth,g=a5.boxHeight;bz.width(h).height(f),bz.attr("src",d),bv.attr("src",d),ay(bz,i,g),by=bz.width(),bx=bz.height(),bv.width(by).height(bx),bq.width(by+br*2).height(bx+br*2),bw.width(by).height(bx),ba.resize(by,bx),a2(),typeof c=="function"&&c.call(aC)},e.src=d}function aK(d,c,f){var e=c||a5.bgColor;a5.bgFade&&a0()&&a5.fadeTime&&!f?d.animate({backgroundColor:e},{queue:!1,duration:a5.fadeTime}):d.css("backgroundColor",e)}function aG(c){a5.allowResize?c?a9.enableOnly():a9.enableHandles():a9.disableHandles(),a7.setCursor(a5.allowSelect?"crosshair":"default"),a9.setCursor(a5.allowMove?"move":"default"),a5.hasOwnProperty("trueSize")&&(bj=a5.trueSize[0]/by,bi=a5.trueSize[1]/bx),a5.hasOwnProperty("setSelect")&&(a3(a5.setSelect),a9.done(),delete a5.setSelect),ba.refresh(),a5.bgColor!=bp&&(aK(a5.shade?ba.getShades():bw,a5.shade?a5.shadeColor||a5.bgColor:a5.bgColor),bp=a5.bgColor),bo!=a5.bgOpacity&&(bo=a5.bgOpacity,a5.shade?ba.refresh():a9.setBgOpacity(bo)),bn=a5.maxSize[0]||0,bm=a5.maxSize[1]||0,bl=a5.minSize[0]||0,bk=a5.minSize[1]||0,a5.hasOwnProperty("outerImage")&&(bz.attr("src",a5.outerImage),delete a5.outerImage),a9.refresh()}var a5=b.extend({},b.Jcrop.defaults),aX,aR=navigator.userAgent.toLowerCase(),aJ=/msie/.test(aR),aF=/msie [1-6]\./.test(aR);typeof a1!="object"&&(a1=b(a1)[0]),typeof aP!="object"&&(aP={}),aQ(aP);var bc={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},bC=b(a1),bB=!0;if(a1.tagName=="IMG"){if(bC[0].width!=0&&bC[0].height!=0){bC.width(bC[0].width),bC.height(bC[0].height)}else{var bA=new Image;bA.src=bC[0].src,bC.width(bA.width),bC.height(bA.height)}var bz=bC.clone().removeAttr("id").css(bc).show();bz.width(bC.width()),bz.height(bC.height()),bC.after(bz).hide()}else{bz=bC.css(bc).show(),bB=!1,a5.shade===null&&(a5.shade=!0)}ay(bz,a5.boxWidth,a5.boxHeight);var by=bz.width(),bx=bz.height(),bw=b("<div />").width(by).height(bx).addClass(a4("holder")).css({position:"relative",backgroundColor:a5.bgColor}).insertAfter(bC).append(bz);a5.addClass&&bw.addClass(a5.addClass);var bv=b("<div />"),bu=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),bt=b("<div />").width("100%").height("100%").css("zIndex",320),bs=b("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var c=be.getFixed();a5.onDblClick.call(aC,c)}).insertBefore(bz).append(bu,bt);bB&&(bv=b("<img />").attr("src",bz.attr("src")).css(bc).width(by).height(bx),bu.append(bv)),aF&&bs.css({overflowY:"hidden"});var br=a5.boundary,bq=bd().width(by+br*2).height(bx+br*2).css({position:"absolute",top:a8(-br),left:a8(-br),zIndex:290}).mousedown(av),bp=a5.bgColor,bo=a5.bgOpacity,bn,bm,bl,bk,bj,bi,bh=!0,bg,bf,bb;aX=aW(bz);var aA=function(){function d(){var i={},g=["touchstart","touchmove","touchend"],e=document.createElement("div"),k;try{for(k=0;k<g.length;k++){var h=g[k];h="on"+h;var f=h in e;f||(e.setAttribute(h,"return;"),f=typeof e[h]=="function"),i[g[k]]=f}return i.touchstart&&i.touchend&&i.touchmove}catch(j){return !1}}function c(){return a5.touchSupport===!0||a5.touchSupport===!1?a5.touchSupport:d()}return{createDragger:function(e){return function(f){return a5.disabled?!1:e==="move"&&!a5.allowMove?!1:(aX=aW(bz),bg=!0,aM(e,aU(aA.cfilter(f)),!0),f.stopPropagation(),f.preventDefault(),!1)}},newSelection:function(e){return av(aA.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:d,support:c()}}(),be=function(){function n(s){s=f(s),g=h=s[0],c=d=s[1]}function m(s){s=f(s),q=s[0]-g,p=s[1]-c,g=s[0],c=s[1]}function l(){return[q,p]}function k(u){var t=u[0],s=u[1];0>h+t&&(t-=t+h),0>d+s&&(s-=s+d),bx<c+s&&(s+=bx-(c+s)),by<g+t&&(t+=by-(g+t)),h+=t,g+=t,d+=s,c+=s}function j(t){var s=i();switch(t){case"ne":return[s.x2,s.y];case"nw":return[s.x,s.y];case"se":return[s.x2,s.y2];case"sw":return[s.x,s.y2]}}function i(){if(!a5.aspectRatio){return e()}var w=a5.aspectRatio,v=a5.minSize[0]/bj,u=a5.maxSize[0]/bj,t=a5.maxSize[1]/bi,s=g-h,E=c-d,D=Math.abs(s),C=Math.abs(E),A=D/C,x,B,z,y;return u===0&&(u=by*10),t===0&&(t=bx*10),A<w?(B=c,z=C*w,x=s<0?h-z:z+h,x<0?(x=0,y=Math.abs((x-h)/w),B=E<0?d-y:y+d):x>by&&(x=by,y=Math.abs((x-h)/w),B=E<0?d-y:y+d)):(x=g,y=D/w,B=E<0?d-y:d+y,B<0?(B=0,z=Math.abs((B-d)*w),x=s<0?h-z:z+h):B>bx&&(B=bx,z=Math.abs(B-d)*w,x=s<0?h-z:z+h)),x>h?(x-h<v?x=h+v:x-h>u&&(x=h+u),B>d?B=d+(x-h)/w:B=d-(x-h)/w):x<h&&(h-x<v?x=h-v:h-x>u&&(x=h-u),B>d?B=d+(h-x)/w:B=d-(h-x)/w),x<0?(h-=x,x=0):x>by&&(h-=x-by,x=by),B<0?(d-=B,B=0):B>bx&&(d-=B-bx,B=bx),o(r(h,d,x,B))}function f(s){return s[0]<0&&(s[0]=0),s[1]<0&&(s[1]=0),s[0]>by&&(s[0]=by),s[1]>bx&&(s[1]=bx),[Math.round(s[0]),Math.round(s[1])]}function r(w,v,u,t){var s=w,z=u,y=v,x=t;return u<w&&(s=u,z=w),t<v&&(y=t,x=v),[s,y,z,x]}function e(){var u=g-h,t=c-d,s;return bn&&Math.abs(u)>bn&&(g=u>0?h+bn:h-bn),bm&&Math.abs(t)>bm&&(c=t>0?d+bm:d-bm),bk/bi&&Math.abs(t)<bk/bi&&(c=t>0?d+bk/bi:d-bk/bi),bl/bj&&Math.abs(u)<bl/bj&&(g=u>0?h+bl/bj:h-bl/bj),h<0&&(g-=h,h-=h),d<0&&(c-=d,d-=d),g<0&&(h-=g,g-=g),c<0&&(d-=c,c-=c),g>by&&(s=g-by,h-=s,g-=s),c>bx&&(s=c-bx,d-=s,c-=s),h>by&&(s=h-bx,c-=s,d-=s),d>bx&&(s=d-bx,c-=s,d-=s),o(r(h,d,g,c))}function o(s){return{x:s[0],y:s[1],x2:s[2],y2:s[3],w:s[2]-s[0],h:s[3]-s[1]}}var h=0,d=0,g=0,c=0,q,p;return{flipCoords:r,setPressed:n,setCurrent:m,getOffset:l,moveOffset:k,getCorner:j,getFixed:i}}(),ba=function(){function k(q,p){l.left.css({height:a8(p)}),l.right.css({height:a8(p)})}function j(){return i(be.getFixed())}function i(p){l.top.css({left:a8(p.x),width:a8(p.w),height:a8(p.y)}),l.bottom.css({top:a8(p.y2),left:a8(p.x),width:a8(p.w),height:a8(bx-p.y2)}),l.right.css({left:a8(p.x2),width:a8(by-p.x2)}),l.left.css({width:a8(p.x)})}function h(){return b("<div />").css({position:"absolute",backgroundColor:a5.shadeColor||a5.bgColor}).appendTo(m)}function g(){c||(c=!0,m.insertBefore(bz),j(),a9.setBgOpacity(1,0,1),bv.hide(),f(a5.shadeColor||a5.bgColor,1),a9.isAwake()?d(a5.bgOpacity,1):d(1,1))}function f(q,p){aK(n(),q,p)}function e(){c&&(m.remove(),bv.show(),c=!1,a9.isAwake()?a9.setBgOpacity(a5.bgOpacity,1,1):(a9.setBgOpacity(1,1,1),a9.disableHandles()),aK(bw,0,1))}function d(p,q){c&&(a5.bgFade&&!q?m.animate({opacity:1-p},{queue:!1,duration:a5.fadeTime}):m.css({opacity:1-p}))}function o(){a5.shade?g():e(),a9.isAwake()&&d(a5.bgOpacity)}function n(){return m.children()}var c=!1,m=b("<div />").css({position:"absolute",zIndex:240,opacity:0}),l={top:h(),left:h().height(bx),right:h().height(bx),bottom:h()};return{update:j,updateRaw:i,getShades:n,setBgColor:f,enable:g,disable:e,resize:k,refresh:o,opacity:d}}(),a9=function(){function p(D){var E=b("<div />").css({position:"absolute",opacity:a5.borderOpacity}).addClass(a4(D));return bu.append(E),E}function o(D,F){var E=b("<div />").mousedown(az(D)).css({cursor:D+"-resize",position:"absolute",zIndex:F}).addClass("ord-"+D);return aA.support&&E.bind("touchstart.jcrop",aA.createDragger(D)),bt.append(E),E}function C(E){var D=a5.handleSize,F=o(E,x++).css({opacity:a5.handleOpacity}).addClass(a4("handle"));return D&&F.width(D).height(D),F}function B(D){return o(D,x++).addClass("jcrop-dragbar")}function A(E){var D;for(D=0;D<E.length;D++){t[E[D]]=B(E[D])}}function y(E){var D,F;for(F=0;F<E.length;F++){switch(E[F]){case"n":D="hline";break;case"s":D="hline bottom";break;case"e":D="vline right";break;case"w":D="vline"}u[E[F]]=p(D)}}function s(E){var D;for(D=0;D<E.length;D++){v[E[D]]=C(E[D])}}function n(E,D){a5.shade||bv.css({top:a8(-D),left:a8(-E)}),bs.css({top:a8(D),left:a8(E)})}function k(E,D){bs.width(Math.round(E)).height(Math.round(D))}function f(){var D=be.getFixed();be.setPressed([D.x,D.y]),be.setCurrent([D.x2,D.y2]),h()}function h(D){if(z){return g(D)}}function g(D){var E=be.getFixed();k(E.w,E.h),n(E.x,E.y),a5.shade&&ba.updateRaw(E),z||w(),D?a5.onSelect.call(aC,ax(E)):a5.onChange.call(aC,ax(E))}function e(D,F,E){if(!z&&!F){return}a5.bgFade&&!E?bz.animate({opacity:D},{queue:!1,duration:a5.fadeTime}):bz.css("opacity",D)}function w(){bs.show(),a5.shade?ba.opacity(bo):e(bo,!0),z=!0}function q(){i(),bs.hide(),a5.shade?ba.opacity(1):e(1),z=!1,a5.onRelease.call(aC)}function m(){r&&bt.show()}function j(){r=!0;if(a5.allowResize){return bt.show(),!0}}function i(){r=!1,bt.hide()}function l(D){D?(bf=!0,i()):(bf=!1,j())}function d(){l(!1),f()}var z,x=370,u={},v={},t={},r=!1;a5.dragEdges&&b.isArray(a5.createDragbars)&&A(a5.createDragbars),b.isArray(a5.createHandles)&&s(a5.createHandles),a5.drawBorders&&b.isArray(a5.createBorders)&&y(a5.createBorders),b(document).bind("touchstart.jcrop-ios",function(D){b(D.currentTarget).hasClass("jcrop-tracker")&&D.stopPropagation()});var c=bd().mousedown(az("move")).css({cursor:"move",position:"absolute",zIndex:360});return aA.support&&c.bind("touchstart.jcrop",aA.createDragger("move")),bu.append(c),i(),{updateVisible:h,update:g,release:q,refresh:f,isAwake:function(){return z},setCursor:function(D){c.css("cursor",D)},enableHandles:j,enableOnly:function(){r=!0},showHandles:m,disableHandles:i,animMode:l,setBgOpacity:e,done:d}}(),a7=function(){function g(n){bq.css({zIndex:450}),n?b(document).bind("touchmove.jcrop",m).bind("touchend.jcrop",l):h&&b(document).bind("mousemove.jcrop",e).bind("mouseup.jcrop",d)}function f(){bq.css({zIndex:290}),b(document).unbind(".jcrop")}function e(n){return j(aU(n)),!1}function d(n){return n.preventDefault(),n.stopPropagation(),bg&&(bg=!1,i(aU(n)),a9.isAwake()&&a5.onSelect.call(aC,ax(be.getFixed())),f(),j=function(){},i=function(){}),!1}function c(p,o,n){return bg=!0,j=p,i=o,g(n),!1}function m(n){return j(aU(aA.cfilter(n))),!1}function l(n){return d(aA.cfilter(n))}function k(n){bq.css("cursor",n)}var j=function(){},i=function(){},h=a5.trackDocument;return h||bq.mousemove(e).mouseup(d).mouseout(d),bz.before(bq),{activateHandlers:c,setCursor:k}}(),aZ=function(){function g(){a5.keySupport&&(e.show(),e.focus())}function f(i){e.hide()}function d(j,i,k){a5.allowMove&&(be.moveOffset([i,k]),a9.updateVisible(!0)),j.preventDefault(),j.stopPropagation()}function c(j){if(j.ctrlKey||j.metaKey){return !0}bb=j.shiftKey?!0:!1;var i=bb?10:1;switch(j.keyCode){case 37:d(j,-i,0);break;case 39:d(j,i,0);break;case 38:d(j,0,-i);break;case 40:d(j,0,i);break;case 27:a5.allowSelect&&a9.release();break;case 9:return !0}return !1}var e=b('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),h=b("<div />").css({position:"absolute",overflow:"hidden"}).append(e);return a5.keySupport&&(e.keydown(c).blur(f),aF||!a5.fixedSupport?(e.css({position:"absolute",left:"-20px"}),h.append(e).insertBefore(bz)):e.insertBefore(bz)),{watchKeys:g}}();aA.support&&bq.bind("touchstart.jcrop",aA.newSelection),bt.hide(),aG(!0);var aC={setImage:aO,animateTo:aL,setSelect:a3,setOptions:aD,tellSelect:aN,tellScaled:aH,setClass:aT,disable:a6,enable:a2,cancel:aY,release:a9.release,destroy:aS,focus:aZ.watchKeys,getBounds:function(){return[by*bj,bx*bi]},getWidgetSize:function(){return[by,bx]},getScaleFactor:function(){return[bj,bi]},getOptions:function(){return a5},ui:{holder:bw,selection:bs}};return aJ&&bw.bind("selectstart",function(){return !1}),bC.data("Jcrop",aC),aC},b.fn.Jcrop=function(a,f){var e;return this.each(function(){if(b(this).data("Jcrop")){if(a==="api"){return b(this).data("Jcrop")}b(this).data("Jcrop").setOptions(a)}else{this.tagName=="IMG"?b.Jcrop.Loader(this,function(){b(this).css({display:"block",visibility:"hidden"}),e=b.Jcrop(this,a),b.isFunction(f)&&f.call(e)}):(b(this).css({display:"block",visibility:"hidden"}),e=b.Jcrop(this,a),b.isFunction(f)&&f.call(e))}}),this},b.Jcrop.Loader=function(l,a,k){function h(){i.complete?(j.unbind(".jcloader"),b.isFunction(a)&&a.call(i)):window.setTimeout(h,50)}var j=b(l),i=j[0];j.bind("load.jcloader",h).bind("error.jcloader",function(c){j.unbind(".jcloader"),b.isFunction(k)&&k.call(i)}),i.complete&&b.isFunction(a)&&(j.unbind(".jcloader"),a.call(i))},b.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:!1,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);$(function(){var l=$(".ques-error-tip");var H=false;var D=true;var I=false;var i=[];var E=[];var e=true;var L=true;var N=false;var w=false;var n=$("#registerEmail");var A=$("#registerPassword");var o=$("#rePassword");var m=$("#registerNick");var x=$("#inputEmail");var K=$("#inputPassword");var M=true;var u=true;var J=false;var z=$(".user-center").attr("uid");var q=1;$("#userfiles").change(function(){var O=$('<iframe name="postiframe" id="postiframe" style="display: none" />');$("body").append(O);var P=$("#theuploadforms");P.attr("action",d()+"/ajax/auto_upload_file");P.attr("method","post");P.attr("enctype","multipart/form-data");P.attr("encoding","multipart/form-data");P.attr("target","postiframe");P.attr("file",$("#userfiles").val());P.submit();$("#postiframe").load(function(){iframeContents=$("#postiframe")[0].contentWindow.document.body.innerHTML;$.post(d()+"/user/upimage",{imgpath:iframeContents},function(Q){$(".jc-demo-box").html(Q)})});return false});$(".comment-input").keyup(function(O){if(O.keyCode==13){k($(this),"height",200)}});$(".comment-btn").click(function(){var O=$(".comment-input").val();var Q=$(".question_info").attr("qid");var P=window.location.href;var R=d()+"/ajax/add_comment";if(O!=""){$.post(R,{comment_content:O,ques_id:Q},function(S){if(S.length=="5"){var T=d()+"/index/login";r(S,T,P)}else{window.location.href=d()+"/question/index/"+Q}})}else{var R=window.location.href;r("请填写回答内容！","");return false}});$(".sns-favour").click(function(){var P=$(this).find("span");var T=$(this).parent().parent().parent().parent().attr("cid");var Q=$(".question_info").attr("qid");var R=$(this).parent().parent().parent().attr("uid");var O=window.location.href;if($(this).hasClass("is_favour")){return false}if(q>2){r("你已经操作过了！","");$(this).addClass("is_favour");q=1;return false}var S=d()+"/ajax/add_favour";$.ajax({async:false,type:"POST",url:S,data:{comment_id:T,quesid:Q,comment_uid:R}}).done(function(U){$result=$.parseJSON(U);if($result.status=="fail"){var V=d()+"/index/login";r("登陆后才能赞，",V,O)}else{P.html($.trim($result.status));q++}})});$(".slide-up").click(function(){$(this).prev().slideUp("slow");$(this).css("display","none")});$(".reply-input").keyup(function(O){if(O.keyCode==13){k($(this),"height",200)}});$(".reply-btn").click(function(){var O=$(this).prev().prev().val();var R=$(this).parent().parent().prev().find("span .cmt-num");if(O!=""){$reply_list=$(this).parent().prev();$comment_id=$(this).parent().parent().parent().parent().attr("cid");var P=window.location.href;var Q=d()+"/ajax/add_reply";$.post(Q,{reply_content:O,comment_id:$comment_id},function(S){if(S.length=="5"){var T=d()+"/index/login";r($.trim(S),T,P)}else{S=$.parseJSON(S);$reply=$("<div class='comment-lists span11'><a href='"+d()+"/person/question/"+S.user_id+"'><img src='"+S.user_img+"' class='span1'></a><a href='"+d()+"/person/question/"+S.user_id+"' class='span3'>"+S.user_name+"</a><div class=' span11 pull-right'>"+O+"</div><p class='span10 reply-time-list pull-left sns-time-list'>"+S.time+"</p></div>");$reply_list.append($reply);R.html(parseInt(R.html())+1);$(".reply-input").val(" ")}})}else{r("请填写评论！","");return false}});$(".nav-tabs li").click(function(){$(this).addClass("active").siblings().removeClass("active")});$("#nickname").change(function(){if($(this).val()==""){$(this).parent().parent().addClass("warning");$(this).siblings().html("请填写昵称！");e=false}else{if(!F($(this).val(),"user_name")){$(this).parent().parent().addClass("warning");$(this).siblings().html("昵称已经被存在了！");e=false}else{$(this).parent().parent().removeClass("warning");$(this).siblings().html("");e=true}}});$(".profile-alter").click(function(){var P=$("#nickname").val();var R=$("#profile").val();var O=$(".help-blocks");var Q=d()+"/ajax/profile_alter";if(e){$.post(Q,{nickname:P,profile:R},function(S){O.css({visibility:"block",color:"red"});O.html($.trim(S))})}else{return false}});$("#email").change(function(){if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}$(this).parent().parent().addClass("warning");$(this).siblings().html("请填写邮箱！");L=false}else{if(s($(this).val())==false){if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).parent().parent().addClass("error");$(this).siblings().html("邮箱地址错误！")}else{if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}$(this).siblings().html("");L=true}}});$("#oldpassword").blur(function(){var Q=$(this).val();var P=$(this);var R=d()+"/ajax/is_true_password";var O;$.ajax({async:false,type:"POST",url:R,data:{oldpassword:Q}}).done(function(S){error=$.parseJSON(S)});if(error.status!="ok"){$(this).parent().parent().addClass("error");$(this).siblings().html("旧密码错误！");N=false}else{if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}$(this).siblings().html("");N=true}});$("#newpassword").blur(function(){if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("请填写密码！").parent().parent().addClass("warning");w=false}else{if($(this).val().length<6){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("密码不能小于6位！").parent().parent().addClass("error");w=false}else{if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("");w=true}}});$("#confirmpassword").blur(function(){if($(this).val()!=$("#newpassword").val()){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("两次输入的密码不同！").parent().parent().addClass("warning");w=false}else{if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("");w=true}});$(".acount-alter").click(function(){var Q=$("#email").val();var O=d()+"/ajax/acount_alter";var R=$("#newpassword").val();var S=$("#confirmpassword").val();var P=$(".help-blocks");if(L&&w&&N){$.post(O,{email:Q,password:R},function(T){$result=$.parseJSON(T);if($result.status=="ok"){P.html("修改成功！").css("color","red")}else{P.html("修改失败！").css("color","")}})}else{return false}});$(".crop-image").live("click",function(){var Q=$("#x").val();var P=$("#y").val();var R=$("#w").val();var T=$("#h").val();var O=$(".upload-img").attr("src");var S=d()+"/ajax/crop_image";$.post(S,{x:Q,y:P,w:R,h:T,imgpath:O},function(U){if($.trim(U)=="true"){window.location.href=d()+"/user/profile"}})});$(".best-answer").click(function(){var Q=$(this).parent().parent().attr("uid");var O=$(".question_info").attr("qid");var P=$(this).parent().parent().parent().attr("cid");var R=d()+"/ajax/set_best_answer";$.post(R,{comment_uid:Q,msgid:O,cid:P},function(S){console.log(S);if($.trim(S)=="true"){$(".best-answer").css("display","none")}})});$(".post-inbox").live("click",function(){$("#inbox").modal("toggle");var P=$(".person-info-bar").html();var O=$(this).parent().parent().parent().children().find(".inbox-to-name").html();if(P!=null){$(".inbox-to").val(P)}else{$(".inbox-to").val("")}if(O!=null){$("#typeahead").val($.trim(O))}});$(".add-inbox").click(function(){var Q=d()+"/ajax/post_inbox";var P=$(".inbox-to").val();var O=$(".inbox-content").val();$.post(Q,{user_name:P,inbox:O},function(R){R=$.parseJSON(R);if(R.status="ok"){$(".modal-backdrop").css("display","none");$("#inbox").css("display","none");$(".inbox-content").val("")}})});$("#typeahead").keyup(function(){var O=d()+"/ajax/get_user_infos";var P=$(this).val();$.post(O,{user_name:P},function(Q){Q=$.parseJSON(Q);if(Q.length>0){for(var R=0;R<Q.length;R++){if(E.indexOf(Q[R].user_id)==-1){i.push(Q[R].user_name);E.push(Q[R].user_id)}}}})});$("#typeahead").typeahead({source:i});$("#message-menu").popover({placement:"bottom",title:'<div style="text-align:center; color:red; text-decoration:underline; font-size:14px;">消息</div>',html:"true",content:'<div id="popOverBox span12"></div>'});$(".search-btn").click(function(){t()});function t(){var O=$(".search-query").val();var P=d()+"/search/index/"+O;if(O!=""){window.location.href=P}else{return false}}$(".show-more").click(function(){var P=parseInt($(this).attr("current-page"));var O=$(this).attr("page");switch(O){case"index":var Q=O+"/get_new_pages";y(Q,P,O);break;case"topic":var Q=O+"/get_new_pages";y(Q,P,O);case"explore":var Q=O+"/get_new_pages";y(Q,P,O);case"info":var Q="topic/get_info_pages";y(Q,P,O)}});function y(R,O,S){var R=d()+"/"+R;var Q=O+1;var P=$(".tag-id").attr("tid");if(P!=undefined){P=P}else{P="null"}$.post(R,{current_page:Q,tag_id:P},function(T){$result=$.parseJSON(T);if($result.data!="null"){switch(S){case"index":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='ques-list span'><div class='feed-list span11'><a href='"+d()+"/person/question/"+$result[V].user_id+"'><img src='"+$result[V].user_img+"' class='user-img span1' /></a><div class='feed-content span11'><p><a href=' "+d()+"/question/index/"+$result[V].msgid+" '  class='title-a'>"+$result[V].ques_title+"</a><span class='sns-time-list pull-right'>"+$result[V].post_time+"</span></p><p class='sns-bar reply-color'><span>悬赏:</span>&nbsp&nbsp"+$result[V].ques_socore+"<span>浏览:</span>&nbsp&nbsp"+$result[V].browser+"<span>分类:"+$result[V].ques_cate+"</span><span class='pull-right'><a href=' "+d()+"/question/index/"+$result[V].msgid+"' class='reply-color'>回答(<span>"+$result[V].anwser+"</span>)</a></span></p></div>");$(".index-ques-list").append($new_ques);$(".show-more").attr("current-page",Q)}break;case"topic":for(var V=0;V<$result.length;V++){$new_topic=$("<div class='ques-list span12'><div class='feed-list span11'><a href='"+d()+"/topic/info/"+T[V].id+" '><img src=' "+$result[V].tag_img+" ' class='user-img span1' /></a><div class='feed-content span11'><p class='feed-content-name'><span><a href='"+d()+"/topic/info/"+$result[V].id+" '>"+$result[V].tag_name+"</a></span></p></div></div></div>");for(var U=0;U<$result[V].ques.length;U++){$new_ques=$("<p><a href='index.php/question/index/"+$result[V].ques[U].msgid+"'>"+$result[V].ques[U].ques_title+"</a><span class='sns-time-list'>"+$result[V].ques[U].post_time+"</span></p>");$new_topic.children().find(".feed-content").append($new_ques)}$(".index-ques-list").append($new_topic);$(".show-more").attr("current-page",Q)}break;case"explore":for(var V=0;V<$result.length;V++){$new_message=$("<div class='ques-list span'><div class='feed-list span11'><a href='"+d()+"/person/question/"+$result[V].user_id+"'><img src='"+$result[V].user_img+"' class='user-img span1' /></a><div class='feed-content span11'><p><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='title-a'>"+$result[V].ques_title+"</a><span class='sns-time-list pull-right'>"+$result[V].post_time+"</span></p><p class='sns-bar reply-color'><span>悬赏:</span>&nbsp&nbsp"+$result[V].ques_socore+"<span>浏览:</span>&nbsp&nbsp"+$result[V].browser+"<span>分类:"+$result[V].ques_cate+"</span><span class='pull-right'><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='get-index-anwser reply-color'>回答(<span>"+$result[V].anwser+"</span>)</a></span></p></div>");$(".index-ques-list").append($new_message);$(".show-more").attr("current-page",Q)}break;case"info":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='ques-list span'><div class='feed-list span11'><a href='"+d()+"/person/question/"+$result[V].user_id+"'><img src='"+$result[V].user_img+"' class='user-img span1' /></a><div class='feed-content span11'><p class='feed-content-name'><span><a href='"+d()+"/person/question/"+$result[V].user_id+"'>"+$result[V].user_name+"</a></span><span class='sns-time-list pull-right'>"+$result[V].post_time+"</span></p><p><a href='"+d()+"/question/index/"+$result[V].msgid+"'>"+$result[V].ques_title+"</a></p><p class='sns-bar reply-color'><span>悬赏:</span>&nbsp&nbsp"+$result[V].ques_socore+"<span>浏览:</span>&nbsp&nbsp"+$result[V].browser+"<span>分类:"+$result[V].ques_cate+"</span><span class='pull-right'><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='get-index-anwser reply-color'>回答(<span>"+$result[V].anwser+"</span>)</a></span></p></div>");$(".index-ques-list").append($new_ques);$(".show-more").attr("current-page",Q)}break}}else{$(".show-more").css("display","none")}})}$(".person-show-more").click(function(){var P=parseInt($(this).attr("current-page"));var O=$(this).attr("page");switch(O){case"other-question":var R="person/get_new_pages";var Q=O;b(P,R,O,Q);break;case"other-answer":var R="person/get_new_pages";var Q=O;b(P,R,O,Q);break;case"my-question":var R="user/get_new_pages";var Q=O;b(P,R,O,Q);break;case"my-answer":var R="user/get_new_pages";var Q=O;b(P,R,O,Q);break}});function b(P,S,O,R){var S=d()+"/"+S;var Q=P+1;var T=$(".person-info-bar").attr("uid");$.post(S,{current_page:Q,uid:T,index:R},function(U){$result=$.parseJSON(U);if($result.data!="null"){switch(O){case"other-question":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='comment-list-info'><p><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='title-a'>"+$result[V].ques_title+"</a><p><p class='reply-color'><span>"+$result[V].answer+"个答案</span>&nbsp&nbsp<span>浏览"+$result[V].browser+"</span>&nbsp&nbsp<span class='sns-time-list'>"+$result[V].post_time+"</span></p></div>");$(".person-info-list").append($new_ques);$(".person-show-more").attr("current-page",Q)}break;case"other-answer":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='comment-list-info'><p><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='title-a'>"+$result[V].ques_title+"</a><p><p class='reply-color'><span>"+$result[V].answer+"个答案</span>&nbsp&nbsp<span>浏览"+$result[V].browser+"</span>&nbsp&nbsp<span class='sns-time-list'>"+$result[V].post_time+"</span></p></div>");$(".person-info-list").append($new_ques);$(".person-show-more").attr("current-page",Q)}break;case"my-question":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='comment-list-info'><p><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='title-a'>"+$result[V].ques_title+"</a><p><p class='reply-color'><span>"+$result[V].answer+"个答案</span>&nbsp&nbsp<span>浏览"+$result[V].browser+"</span>&nbsp&nbsp<span class='sns-time-list'>"+$result[V].post_time+"</span></p></div>");$(".person-info-list").append($new_ques);$(".person-show-more").attr("current-page",Q)}break;case"my-answer":for(var V=0;V<$result.length;V++){$new_ques=$("<div class='comment-list-info'><p><a href='"+d()+"/question/index/"+$result[V].msgid+"' class='title-a'>"+$result[V].ques_title+"</a><p><p class='reply-color'><span>"+$result[V].answer+"个答案</span>&nbsp&nbsp<span>浏览"+$result[V].browser+"</span>&nbsp&nbsp<span class='sns-time-list'>"+$result[V].post_time+"</span></p></div>");$(".person-info-list").append($new_ques);$(".person-show-more").attr("current-page",Q)}break}}else{$(".person-show-more").css("display","none")}})}$(".inbox-show-more").click(function(){var P=parseInt($(this).attr("current-page"));var O=$(this).attr("page");switch(O){case"inbox-info":var Q="inbox/get_new_pages";C(P,Q,O);break}});function C(P,O,S){var O=d()+"/"+O;var Q=P+1;var R=$(".comment-list-info").attr("page-id");$.post(O,{current_page:Q,page_id:R},function(T){$result=$.parseJSON(T);$user_info=$result.user_info;if($user_info!=""){for(var V=0;V<$user_info.length;V++){var U=$("<div class='span10 comment-lists' page-id='"+$user_info[V].page_id+"'><p><a href='"+d()+"/person/question/"+$user_info[V].my_id+"' class='pull-left inbox-to-name'>"+$user_info[V].name+"</a>:"+$user_info[V].inbox+"</p><span class='sns-time-list'>"+$user_info[V].time+"</span><span class='pull-right'><input type='button' class='btn post-inbox btn-small' value='回复' /></span></div>");$(".inbox-info-list").append(U);$(".inbox-show-more").attr("current-page",Q)}}else{$(".inbox-show-more").css("display","none")}})}$(".message-show-more").click(function(){var P=parseInt($(this).attr("current-page"));var O=$(this).attr("page");var Q="message/get_new_pages";v(P,Q,O)});function v(P,R,O){var R=d()+"/"+R;var Q=P+1;var S=$(".user-center").attr("uid");$.post(R,{current_page:Q,index:O,uid:S},function(T){$result=$.parseJSON(T);if($result.data!="null"){switch(O){case"answer":for(var U=0;U<$result.length;U++){$new_answer=$("<div class='comment-list-info span11'><p><span><a href='"+d()+"/person/question/"+$result[U].user_id+"'>"+$result[U].user_name+"</a>回答了你的问题:</span><span><a href='"+d()+"/question/index/"+$result[U].msgid+"'>"+$result[U].ques_title+"</a></span></p><p>"+$result[U].comment_content+"</p><p class='sns-time-list'>"+$result[U].comment_time+"</p></div>");$(".my-reply").append($new_answer);$(".message-show-more").attr("current-page",Q)}break;case"reply":for(var U=0;U<$result.length;U++){$new_reply=$("<div class='comment-list-info span11'><p><span><a href='"+d()+"/person/question/"+$result[U].user_id+"'>"+$result[U].user_name+"</a>在问题&nbsp</span><span><a href='"+d()+"/question/index/"+$result[U].msgid+"'>"+$result[U].ques_title+"</a>中回复了你的回答:"+$result[U].comment_content+"</span></p><p>"+$result[U].reply_content+"</p><p class='sns-time-list'>"+$result[U].time+"</p></div>");$(".my-reply").append($new_reply);$(".message-show-more").attr("current-page",Q)}break;case"favour":for(var U=0;U<$result.length;U++){$new_favour=$("<div class='comment-list-info span11'><span><a href='"+d()+"/person/question/"+$result[U].user_id+"'>"+$result[U].user_name+"</a>在问题&nbsp</span><span><a href='"+d()+"/question/index/"+$result[U].msgid+"'>"+$result[U].ques_title+"</a>中回赞了你的回答:"+$result[U].comment_content+"</span><p class='sns-time-list'>"+$result[U].favour_time+"</p></div>");$(".my-reply").append($new_favour);$(".message-show-more").attr("current-page",Q)}break;case"best":for(var U=0;U<$result.length;U++){$new_best=$("<div class='comment-list-info span12'><span><a href='"+d()+"/person/question/"+$result[U].user_id+"'>"+$result[U].user_name+"</a>在问题&nbsp</span><span><a href='"+d()+"/question/index/"+$result[U].msgid+"'>"+$result[U].ques_title+"</a></p>中把你的回答:"+$result[U].comment_content+"设为最佳答案</span><p class='sns-time-list'>"+$result[U].time+"</p><p><a href='"+d+"index.php/question/index/"+$result[U].msgid+"'>快去看看吧</a></p></div>");$(".my-reply").append($new_best);$(".message-show-more").attr("current-page",Q)}break}}else{$(".message-show-more").css("display","none")}})}$(window).scroll(function(){if($(window).scrollTop()>$(window).height()){$(".to-top").css("display","block")}else{$(".to-top").css("display","none")}});$(".question-content").keyup(function(O){if(O.keyCode==13){k($(this),"height",200)}});$("#formsubmit").click(function(){if(H&&I&&D){var T=$(".question-title").val();var O=$(".question-content").val();var R=$(".question-cate option:selected").val();var Q=parseInt($(".question-socore").val());var P=$(".question-anoy").attr("checked")?1:0;var S=d()+"/ajax/post_message";var U=d()+"/ajax/scwc_api";$.post(S,{question_title:T,question_content:O,cate:R,question_socore:Q,question_anoy:P},function(V){$result=$.parseJSON(V);if($result.status=="1"){$(".modal-backdrop").css("display","none");$("#myModal").css("display","none");$.post(U,{question_title:T,question_content:O,cate:R,ques_id:$result.msgid},function(W){window.location.href=""})}else{alert("发送失败请重新发布！")}})}else{if(!H){return j("请填写标题！","error")}else{if(!I){return j("填写悬赏积分！","error")}else{if(!D){return j("请创建分类！","error")}}}}});$(".create").click(function(){$(this).css("display","none");$(".create-cate").css("display","block");D=false});$(".create-cate span").click(function(){var Q=$(this).siblings().val();var O=d()+"/ajax/create_cate";var P=false;if(Q==""){$(this).parent().css("display","none");D=true}else{$(".ques-error-tip").html("").css("color","");P=true;D=true}if(P==true){$.ajax({async:false,type:"POST",url:O,data:{cate_name:Q}}).done(function(R){var T;$result=$.parseJSON(R);for(var S=0;S<$result.length;S++){T+="<option  selected value="+$result[S].id+">"+$result[S].tag_name+"</option>"}$(".question-cate").html(T);$(".create-cate").css("display","none")})}});$(".question-title").blur(function(){var O;if($(this).val()==""){O="请填写标题!";H=j(O,"error")}else{if($(this).val().length<4){O="标题不得小于4个字符!";H=j(O,"short")}else{H=j("","success")}}});$(".question-socore").change(function(){var P=$(this).val();var O=$(".user-center").attr("uid");var Q=d()+"/ajax/check_score";if(P.substr(0,1)>0){if(P>=0){$.post(Q,{uid:O,score:parseInt(P)},function(R){R=$.trim(R);if(R!=""){I=j(R,"error")}else{I=j("","success")}})}else{I=j("请填写悬赏分数！","error")}}else{I=j("请输入正确的分数！","error")}});n.keyup(function(){$(".error-tip").html("");if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("请填写邮箱！").parent().parent().addClass("warning");M=false}else{if(s($(this).val())==false){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("邮箱错误！").parent().parent().addClass("error");M=false}else{if(F($(this).val(),"user_email")){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("邮箱可以注册！").parent().parent().addClass("success");M=true}else{if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("邮箱名已经被注册！").parent().parent().addClass("error");M=false}}}});m.keyup(function(){$(".error-tip").html("");if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("请填写昵称！").parent().parent().addClass("warning");J=false}else{if($(this).val().length<2){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("昵称太短！").parent().parent().addClass("error");J=false}else{if($(this).val().length>8){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("昵称不能超过8位！").parent().parent().addClass("error");J=false}else{if(F($(this).val(),"user_name")){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("昵称可以注册！").parent().parent().addClass("success");J=true}else{if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("昵称已经被注册！").parent().parent().addClass("error");J=false}}}}});A.keyup(function(){$(".error-tip").html("");if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("请填写密码！").parent().parent().addClass("warning");u=false}else{if($(this).val().length<6){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("密码不能小于6位！").parent().parent().addClass("error");u=false}else{if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("").parent().parent().addClass("success");u=true}}});o.keyup(function(){if($(this).val()!=A.val()){if($(this).parent().parent().hasClass("success")){$(this).parent().parent().removeClass("success")}$(this).next().html("两次输入的密码不同！").parent().parent().addClass("warning");u=false}else{$(this).next().html("").parent().parent().addClass("success");u=true}});$(".register-btn").click(function(){g()});function g(Q,P,O,R){var P=m.val();var O=n.val();var R=A.val();var Q=d()+"/ajax/register";if(M&&u&&J){$.post(Q,{username:P,useremail:O,userpassword:R},function(S){$result=$.parseJSON(S);if($result.status=="ok"){window.location.href=d()+"/index"}else{$(".error-tip").html("注册失败！").css("color","#b94a48")}})}else{return false}}x.keyup(function(){$(".error-tip").html("");if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}$(this).next().html("请填写邮箱！").parent().parent().addClass("warning");M=false}else{if(s(x.val())==false){if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("邮箱错误！").parent().parent().addClass("error");M=false}else{if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("");M=true}}});K.keyup(function(){$(".error-tip").html("");if($(this).val()==""){if($(this).parent().parent().hasClass("error")){$(this).parent().parent().removeClass("error")}$(this).next().html("请填写密码！").parent().parent().addClass("warning");u=false}else{if($(this).val().length<6){$(this).next().html("密码太短了！").parent().parent().addClass("warning");u=false}else{if($(this).parent().parent().hasClass("warning")){$(this).parent().parent().removeClass("warning")}$(this).next().html("");u=true}}});$(window).keydown(function(O){if(O.keyCode==13){if(window.location.href==d()+"/index/login"){a()}else{if(window.location.href==d()+"/index/register"){g()}else{t()}}}});$(".login-btn").click(function(){a()});function a(){var Q=d()+"/ajax/login";var P=x.val();var O=K.val();if(M==true&&u==true){$.post(Q,{useremail:P,userpassword:O},function(R){$result=$.parseJSON(R);if($result.status=="1"&&$result.role=="0"){h(P,O);window.location.href=G()}else{if($result.status=="1"&&$result.role=="1"){h(P,O);window.location.href=d()+"/admin"}else{$(".error-tip").html("用户名或密码错误！").css("color","#b94a48")}}})}else{return false}}function F(O,R){var Q=d()+"/ajax/check_is_register";var P=false;$.ajax({async:false,type:"POST",url:Q,data:{data:O,cate:R}}).done(function(S){$result=$.parseJSON(S);if($result.status=="0"){P=true}});return P}function j(P,Q){var O=false;if(Q=="error"){l.html(P).css("color","#b94a48")}else{if(Q=="short"){l.html(P).css("color","#b94a48")}else{l.html(P).css("color","");O=true}}return O}$("#inputEmail").val($.cookie("username"));$("#inputPassword").val($.cookie("password"));$(".user-center").hover(function(){$(".user-menu").css("display","block");$(this).addClass("active")},function(){$(".user-menu").css("display","none");$(this).removeClass("active")});$(".nav-poi li").click(function(){$(this).addClass("active").siblings().removeClass("active")});$(".create-question").click(function(){$("#myModal").modal("toggle")});$(".no-login-ques").click(function(){var O=d()+"/index/login";r("亲，只有登录后才能发布问题",O)});$(".erro-confirm").click(function(){if($(this).attr("data-target")!=""){window.location.href=$(this).attr("data-target")}else{$(this).attr("data-target")=" ";$(".erro-confirm").attr("data-dismiss","modal")}});$(".login-btn-trans").click(function(){window.location.href=d()+"/index/login"});$(".register-btn-trans").click(function(){window.location.href=d()+"/index/register"});$(".cmt-reply").click(function(){var O=$(this).parent().parent().next().children().next();$(window).scrollTop($(this).parent().parent().parent().height()+$(document).scrollTop()-150);if(O.css("display")=="none"){O.css("display","block")}else{O.css("display","none")}});function r(O,Q,P){$("#erro_tip").modal("toggle");$(".ero-msg-body").html(O);$(".erro-confirm").attr("data-target",Q+"?"+P)}function G(){var P;var Q=window.location.href;if(Q!=d()+"/index/login"){var O=Q.indexOf("?");P=Q.substr(O+1,Q.length)}else{P=d()+"/index"}return P}function k(S,Q,P){var O,R;if(Q=="height"){O=S.height();R=S.scrollTop();S.animate({height:parseInt(O+R)},P)}else{O=S.width();R=S.scrollLeft();S.animate({width:parseInt(O+R)},P)}}function c(){var O=d()+"/ajax/get_new_inbox";$.post(O,{user_id:z},function(P){P=$.parseJSON(P);if(P[0].inboxnum>"0"){f("","您有"+P[0].inboxnum+"条新的私信息请注意查收");$(".bubble").css("visibility","visible").html(P[0].inboxnum)}else{$(".bubble").css("visibility","hidden")}})}function p(){if(window.webkitNotifications){window.webkitNotifications.requestPermission()}}function f(P,O){if(window.webkitNotifications){if(window.webkitNotifications.checkPermission()>=0){window.webkitNotifications.requestPermission(f)}else{window.webkitNotifications.createNotification(d()+"/data/upimage/thumbnail/defualtlogo.png",P,O)}}}function B(){var O=d()+"/message/get_message_num";$.post(O,{user_id:z},function(Q){Q=$.parseJSON(Q);var U=parseInt(Q.answer);var T=parseInt(Q.reply);var R=parseInt(Q.favour);var P=parseInt(Q.best);var S=U+T+R+P;if(S>0){f("","您有"+S+"条新的消息请注意查收");$(".message-bubble").css("visibility","visible").html(S)}else{$(".message-bubble").css("visibility","hidden")}if(U>0){$(".answer-bubble").css("visibility","visible").html(U)}else{$(".answer-bubble").css("visibility","hidden")}if(T>0){$(".reply-bubble").css("visibility","visible").html(T)}else{$(".reply-bubble").css("visibility","hidden")}if(R>0){$(".favour-bubble").css("visibility","visible").html(R)}else{$(".favour-bubble").css("visibility","hidden")}if(P>0){$(".best-bubble").css("visibility","visible").html(P)}else{$(".best-bubble").css("visibility","hidden")}})}if(z!=undefined){c();B();setInterval(c,15000);setInterval(B,15000)}function d(){var O=location.protocol+"//"+location.host+"/index.php";return O}function h(P,O){$.cookie("username",P,{expires:7});$.cookie("password",O,{expires:7})}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(O){var Q=this.length>>>0;var P=Number(arguments[1])||0;P=(P<0)?Math.ceil(P):Math.floor(P);if(P<0){P+=Q}for(;P<Q;P++){if(P in this&&this[P]===O){return P}}return -1}}function s(O){var P=/^(?:[a-z\d]+[_\-\+\.]?)*[a-z\d]+@(?:([a-z\d]+\-?)*[a-z\d]+\.)+([a-z]{2,})+$/i;return P.test(O)}});